webpackJsonp([13],{1609:function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(34),s=o(n),d=a(30),u=o(d),i=a(31),l=o(i),f=a(35),c=o(f),p=a(36),v=o(p),h=a(167),m=o(h),w=a(27),y=o(w),C=a(0),b=o(C),_=a(1610),g=a(90),k=a(142),L=r(k),E=a(469),U=r(E);a(306);var M=a(42),R=o(M),x=a(48),B=o(x),O=a(308),S=o(O),F=a(169),I=r(F),j=a(47),P=r(j),D=a(1137),q=o(D),A=a(1322),V=a(40),W=o(V),z=W.default.dispatch,J=W.default.getState,N=function(e){function t(e){(0,u.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.onUserChanged=a.onUserChanged.bind(a),a.state={user:R.default.getCurrentUser()},document.getElementById("root").className+=" channel-view",a}return(0,v.default)(t,e),(0,l.default)(t,[{key:"isValidState",value:function(){return null!=this.state.user}},{key:"onUserChanged",value:function(){var e=R.default.getCurrentUser();P.areObjectsEqual(this.state.user,e)||this.setState({user:e})}},{key:"componentWillMount",value:function(){S.default.clearLastError()}},{key:"componentDidMount",value:function(){U.initialize(),(0,m.default)(window).on("beforeunload",function(){(0,m.default)(window).off("beforeunload"),document.cookie.indexOf("MMUSERID=")>-1&&(0,g.viewChannel)("",B.default.getCurrentId()||"")(z,J),U.close()}),R.default.addChangeListener(this.onUserChanged),window.addEventListener("focus",this.onFocusListener),window.addEventListener("blur",this.onBlurListener),I.isIos()?(0,m.default)("body").addClass("ios"):I.isAndroid()&&(0,m.default)("body").addClass("android"),this.state.user||((0,m.default)("#root").attr("class",""),L.emitUserLoggedOutEvent("/login?redirect_to="+encodeURIComponent(this.props.location.pathname))),(0,m.default)("body").on("mouseenter mouseleave",".post",function(e){"mouseenter"===e.type?((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--after"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--before")):((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--after"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--before"))}),(0,m.default)("body").on("mouseenter mouseleave",".search-item__container .post",function(e){"mouseenter"===e.type?((0,m.default)(this).closest(".search-item__container").find(".date-separator").addClass("hovered--after"),(0,m.default)(this).closest(".search-item__container").next("div").find(".date-separator").addClass("hovered--before")):((0,m.default)(this).closest(".search-item__container").find(".date-separator").removeClass("hovered--after"),(0,m.default)(this).closest(".search-item__container").next("div").find(".date-separator").removeClass("hovered--before"))}),(0,m.default)("body").on("mouseenter mouseleave",".post.post--comment.same--root",function(e){"mouseenter"===e.type?((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--comment"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--comment")):((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--comment"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--comment"))}),(0,m.default)(window).on("keydown.preventBackspace",function(e){8!==e.which||(0,m.default)(e.target).is("input, textarea")||e.preventDefault()})}},{key:"componentWillUnmount",value:function(){U.close(),R.default.removeChangeListener(this.onUserChanged),(0,m.default)("body").off("click.userpopover"),(0,m.default)("body").off("mouseenter mouseleave",".post"),(0,m.default)("body").off("mouseenter mouseleave",".post.post--comment.same--root"),(0,m.default)(".modal").off("show.bs.modal"),(0,m.default)(window).off("keydown.preventBackspace"),window.removeEventListener("focus",this.onFocusListener),window.removeEventListener("blur",this.onBlurListener)}},{key:"render",value:function(){return this.isValidState()?(0,A.checkIfMFARequired)(this.props.match.url)?b.default.createElement(_.Redirect,{to:"/mfa/setup"}):this.props.children:b.default.createElement(q.default,null)}},{key:"onFocusListener",value:function(){L.emitBrowserFocus(!0)}},{key:"onBlurListener",value:function(){L.emitBrowserFocus(!1)}}]),t}(b.default.Component);t.default=N,N.propTypes={children:y.default.object}},1610:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(474);a.d(t,"MemoryRouter",function(){return r.a});var o=a(475);a.d(t,"Prompt",function(){return o.a});var n=a(476);a.d(t,"Redirect",function(){return n.a});var s=a(316);a.d(t,"Route",function(){return s.a});var d=a(224);a.d(t,"Router",function(){return d.a});var u=a(477);a.d(t,"StaticRouter",function(){return u.a});var i=a(478);a.d(t,"Switch",function(){return i.a});var l=a(225);a.d(t,"matchPath",function(){return l.a});var f=a(479);a.d(t,"withRouter",function(){return f.a})}});
//# sourceMappingURL=13.f7028488fdcff69dae74.js.map